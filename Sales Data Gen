# ðŸ§ª Synthetic Sales Data Generator

> **Season + Trend + Cohort Repurchase (Productionâ€‘grade concept)**
> Designed for BI / Power BI / Cohort & Retention analysis

---

## ðŸŽ¯ Purpose

This project regenerates **realistic synthetic sales data** that behaves like a real business:

* ðŸ“ˆ **Trend**: Business grows yearâ€‘overâ€‘year (YoY)
* ðŸŒŠ **Seasonality**: Monthly ups & downs (Q4 peak, weak months)
* ðŸ” **Cohort Repurchase**: Customers return over time, not all at once
* ðŸŽ² **Controlled Randomness**: Data looks organic, not fake

The output is suitable for:

* Cohort retention analysis
* YoY / MoM analysis
* Stock speed & inventory simulation
* BI interview demos & portfolios

---

## ðŸ§  Highâ€‘Level Idea

> "Customers start in different months, buy with different intensity, and return over time.
> The business grows, fluctuates seasonally, and never behaves perfectly smoothly."

This generator intentionally avoids:

* Flat YoY growth
* All customers buying forever
* One product dominating all sales

---

## ðŸ§± Data Flow Overview

```
Customer Pool
   â†“
Customer Cohort (first purchase)
   â†“
Order Frequency (HEAVY / NORMAL)
   â†“
Month Selection (Season + Trend + Noise)
   â†“
Sale Date Generation (Cohortâ€‘aware)
   â†“
Sales Table
   â†“
Product Bag Sampling (80/20)
   â†“
Sale Items Table
```

---

## STEP 0ï¸âƒ£ Clear Existing Data

```sql
TRUNCATE TABLE sale_items, sales RESTART IDENTITY;
```

Ensures reproducible regeneration and clean IDs.

---

## STEP 1ï¸âƒ£ Define Business Parameters

```sql
growth_2024 = +12%
growth_2025 = +8%
noise_sd    = 0.18
```

| Parameter   | Meaning                              |
| ----------- | ------------------------------------ |
| growth_2024 | Avg growth of 2024 vs 2023           |
| growth_2025 | Avg growth of 2025 vs 2024           |
| noise_sd    | Monthly volatility (YoY +/â€‘ realism) |

> Increase `noise_sd` â†’ more volatile YoY
> Decrease â†’ smoother business

---

## STEP 2ï¸âƒ£ Customer Cohort & Order Frequency

Customers are generated from `branch_customer_pool`:

* Each customer gets a **first_purchase_date** (2023â€“2025)
* Tier is assigned using **80/20 rule**

| Tier   | Share | Orders |
| ------ | ----- | ------ |
| HEAVY  | ~20%  | 12â€“34  |
| NORMAL | ~80%  | 2â€“8    |

This immediately creates:

* Power users
* Longâ€‘tail customers

---

## STEP 3ï¸âƒ£ Monthly Weight Engine (Season + Trend + Noise)

Each month receives a weight:

```
weight = season Ã— trend Ã— noise
```

### ðŸŒŠ Seasonality

* April weak
* Q4 strongest

### ðŸ“ˆ Trend

* 2024 > 2023
* 2025 > 2024

### ðŸŽ² Noise

* Logâ€‘normalâ€‘like monthly randomness
* Produces realistic YoY ups & downs

A cumulative sum creates a **roulette wheel**, so highâ€‘weight months are selected more often.

---

## STEP 4ï¸âƒ£ Month Selection (Roulette Sampling)

For every order:

* A random number selects a month
* Probability âˆ monthly weight

Result:

* More orders in strong months
* Still possible sales in weak months

---

## STEP 5ï¸âƒ£ Cohortâ€‘Aware Sale Date Generation

To avoid fakeâ€‘looking cohorts:

* **70%** of orders happen close to first purchase (0â€“180 days, earlyâ€‘biased)
* **30%** spread wider (0â€“360 days)

This creates:

* Natural retention decay
* No artificial flat retention

Sale dates are then **forced into the chosen sale month** so season & trend actually matter.

---

## STEP 6ï¸âƒ£ Insert SALES

Each sale contains:

* sale_date (monthâ€‘aligned)
* sale_ts (realistic hour)
* customer_id
* branch

The result is a time series with:

* Growth
* Seasonality
* Cohort behavior

---

## STEP 7ï¸âƒ£ Product Weight & Bag Sampling (Antiâ€‘Monopoly)

Instead of `ORDER BY random()`:

* Products are placed into a **product bag** based on weight
* Heavier products appear more often
* Selection uses deterministic hashing

### Benefits

* Fast
* Stable
* No single product dominates
* Clean 80/20 behavior

---

## STEP 8ï¸âƒ£ Insert SALE_ITEMS

For each sale:

* 1â€“5 line items
* Quantity 1â€“5
* Cost & price fluctuate slightly

Sampling logic:

```
bag_id = hash(sale_id, line_no) % bag_size
```

---

## âœ… Validation Queries

Check YoY behavior:

```sql
SELECT ym, rev,
       (rev - LAG(rev,12) OVER()) / LAG(rev,12) OVER() AS yoy
FROM monthly_revenue;
```

Expected:

* YoY alternates + / â€“
* Longâ€‘term upward trend remains

---

## ðŸ§  Why This Works Well for BI

* Cohort analysis behaves realistically
* YoY charts donâ€™t look fake
* Retention decays naturally
* Product mix follows 80/20

Perfect for:

* Power BI demos
* Interview portfolios
* Stressâ€‘testing dashboards

---

## ðŸ”§ Tunable Knobs

| Goal                 | Adjust             |
| -------------------- | ------------------ |
| Stronger seasonality | season multipliers |
| Faster growth        | growth_2024 / 2025 |
| Wilder YoY           | noise_sd           |
| More loyal users     | HEAVY order range  |

---

## ðŸ§­ Final Note

> This generator is **not random for randomnessâ€™ sake**.
> Every randomness is constrained by business logic.

The result is data that *looks wrong in small ways* â€” exactly like real data.

---

ðŸ“Œ Ideal companion:

* Customerâ€‘month cohort views
* Retention matrix
* Stock speed (90â€‘day) simulation

---

**Author:** Data Analytics / BI Simulation Project
